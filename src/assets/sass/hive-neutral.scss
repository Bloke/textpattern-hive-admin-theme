@use "sass:meta";
@use "sass:color"; // TEMP
@use "setup";
@forward "modules";

// This is a flat theme
$flat-theme: 1;

// slightly lighten a colour
@function tint($color, $percentage) {
    @return color.mix(white, $color, $percentage);
}

// slightly darken a colour
@function shade($color, $percentage) {
    @return color.mix(black, $color, $percentage);
}

/* Colourscheme
   ========================================================================== */

/* stylelint-disable declaration-colon-space-after */

:root {
    // text colours
    --color-text:                          hsl(0, 0%, 20%);
    --color-text-heading:                  hsl(0, 0%, 0%);
    --color-text-footnote:                 hsl(0, 0%, 35%);
    --color-text-inversed:                 hsl(0, 0%, 100%);
    --color-text-enforced-white:           hsl(0, 0%, 100%);
    --color-text-form:                     hsl(0, 0%, 0%);
    --color-text-form-placeholder:         hsl(0, 0%, 60%);
    --color-text-button:                   hsl(0, 0%, 0%);
    --color-text-button-hover:             hsl(0, 0%, 0%);
    --color-text-button-active:            hsl(0, 0%, 0%);
    // neutral colours
    --color-background:                    hsl(0, 0%, 97%);
    --color-background-enforced-white:     hsl(0, 0%, 100%);
    --color-background-box:                hsl(0, 0%, 100%);
    --color-background-form:               hsl(0, 0%, 100%);
    --color-background-form-disabled:      hsl(0, 0%, 89%);
    --color-gradient-from:                 hsl(0, 0%, 93%);
    --color-gradient-to:                   hsl(0, 0%, 93%); // nullify gradient (use flat colours)
    // accent colours
    --color-accent-gradient-from:          hsl(208, 72%, 87%);
    --color-accent-gradient-to:            hsl(208, 72%, 87%); // nullify gradient (use flat colours)
    --color-accent-dark:                   hsl(48, 100%, 42%);
    --color-accent-background:             hsl(48, 100%, 94%);
    --color-highlight-box:                 hsla(48, 100%, 63%, 0.25);
    --color-strong-highlight-box:          hsla(48, 100%, 63%, 0.66);
    // border colours
    --color-border:                        hsl(0, 0%, 80%);
    --color-border-light:                  hsl(0, 0%, 82%);
    --color-border-extra-light:            hsl(0, 0%, 84%);
    --color-border-dark:                   hsl(0, 0%, 75%);
    --color-border-extra-dark:             hsl(0, 0%, 70%);
    // interaction colours
    --color-link:                          hsl(216, 100%, 37%);
    --color-link-hover:                    hsl(216, 100%, 50%);
    --color-link-focus:                    hsl(216, 100%, 50%);
    --color-selecting:                     hsl(216, 100%, 87%);
    --color-selected:                      hsl(216, 100%, 92%);
    // button colours
    --color-button-gradient-from:          hsl(0, 0%, 93%);
    --color-button-gradient-to:            hsl(0, 0%, 87%);
    --color-button-border:                 hsl(0, 0%, 80%);
    --color-button-primary-gradient-from:  hsl(48, 100%, 70%);
    --color-button-primary-gradient-to:    hsl(48, 100%, 55%);
    --color-button-primary-border:         hsl(48, 100%, 48%);
    --color-button-selected-gradient-from: hsl(216, 100%, 95%);
    --color-button-selected-gradient-to:   hsl(216, 100%, 90%);
    --color-button-selected-border:        hsl(216, 100%, 79%);
    // alert colours
    --color-success-text:                  hsl(120, 60%, 34%);
    --color-success-background:            hsl(120, 40%, 90%);
    --color-success-border:                hsl(102, 40%, 68%);
    --color-warning-text:                  hsl(41, 100%, 40%);
    --color-warning-background:            hsl(41, 64%, 91%);
    --color-warning-border:                hsl(41, 64%, 71%);
    --color-error-text:                    hsl(4, 69%, 36%);
    --color-error-background:              hsl(4, 43%, 91%);
    --color-error-border:                  hsl(4, 43%, 78%);
    --color-info-text:                     hsl(200, 50%, 45%);
    --color-info-background:               hsl(200, 78%, 95%);
    --color-info-border:                   hsl(200, 78%, 82%);
    // shadows
    --standard-shadow:                     0 0 0.5em hsla(0, 0%, 0%, 0.2);
    --inset-lowlighting:                   inset 0 0.2em 0.25em hsla(0, 0%, 0%, 0.15);
}

@include setup.dark-mode {
    // text colours
    --color-text:                          hsl(210, 14%, 83%);
    --color-text-heading:                  hsl(0, 0%, 100%);
    --color-text-footnote:                 hsl(210, 14%, 70%);
    --color-text-inversed:                 hsl(210, 11%, 24%);
    --color-text-form:                     hsl(0, 0%, 100%);
    --color-text-form-placeholder:         hsl(210, 6%, 48%);
    // neutral colours
    --color-background:                    hsl(210, 11%, 24%);
    --color-background-box:                hsl(210, 11%, 20%);
    --color-background-form:               hsl(210, 11%, 17%);
    --color-background-form-disabled:      hsl(210, 11%, 17%);
    --color-gradient-from:                 hsl(210, 9%, 30%);
    --color-gradient-to:                   hsl(210, 9%, 30%); // nullify gradient (use flat colours)
    // border colours
    --color-border:                        hsl(210, 7%, 53%);
    --color-border-light:                  hsl(210, 7%, 43%);
    --color-border-extra-light:            hsl(210, 7%, 33%);
    --color-border-dark:                   hsl(210, 7%, 20%);
    --color-border-extra-dark:             hsl(210, 7%, 6%);
    // interaction colours
    --color-link:                          hsl(210, 100%, 81%);
    --color-link-hover:                    hsl(210, 100%, 87%);
    --color-link-focus:                    hsl(312, 100%, 50%);
    --color-selecting:                     hsl(210, 50%, 18%);
    --color-selected:                      hsl(210, 50%, 21%);
    // alert colours
    --color-success-text:                  hsl(100, 60%, 50%);
    --color-success-background:            hsl(109, 27%, 20%);
    --color-success-border:                hsla(100, 60%, 50%, 0.33);
    --color-warning-text:                  hsl(40, 100%, 62%);
    --color-warning-background:            hsl(49, 35%, 21%);
    --color-warning-border:                hsla(40, 100%, 62%, 0.33);
    --color-error-text:                    hsl(337, 100%, 60%);
    --color-error-background:              hsl(348, 34%, 21%);
    --color-error-border:                  hsla(337, 100%, 60%, 0.43);
    --color-info-text:                     hsl(207, 100%, 63%);
    --color-info-background:               hsl(207, 68%, 17%);
    --color-info-border:                   hsla(207, 100%, 63%, 0.38);
    // shadows
    --standard-shadow:                     0 0 0.5em hsla(0, 0%, 0%, 0.75);
}

$color-button-gradient-from:          #9dc8ef;
$color-button-gradient-to:            #9dc8ef; // nullify gradient (use flat colours)
$color-button-primary-gradient-from:  #9ccc66;
$color-button-primary-gradient-to:    #9ccc66; // nullify gradient (use flat colours)
$color-button-selected-gradient-from: tint($color-button-gradient-from, 33%);
$color-button-selected-gradient-to:   tint($color-button-gradient-to, 33%); // nullify gradient (use flat colours)

$dark-color-text-button:              #000000;
$dark-color-text-button-hover:        #000000;
$dark-color-text-button-active:       #000000;
$dark-color-text-button-disabled:     #000000;
$dark-color-background:               #373e45;
$dark-color-gradient-from:            shade($dark-color-background, 24%);
$dark-color-gradient-to:              shade($dark-color-background, 24%); // nullify gradient (use flat colours)

$border-radius:                       0.3em;

// import the default Hive (Classic Yellow) theme
@include meta.load-css("hive-default");

@media screen {
    tr {
        border-color: var(--color-border);
    }

    @include setup.dark-mode {
        tr {
            border-color: var(--color-border-extra-light);
        }
    }

    .txp-list {
        tbody tr,
        thead th,
        thead th:first-child {
            border-color: var(--color-border);
        }
    }

    @include setup.dark-mode {
        .txp-list {
            tbody tr,
            thead th,
            thead th:first-child {
                border-color: var(--color-border-extra-light);
            }
        }
    }

    .txp-edit,
    .txp-details {
        background: var(--color-background);
    }

    .dropdown-menu {
        border-radius: 0;
        background: #ffffff;

        li {
            &:hover {
                background: var(--color-selected);
            }

            &.selected {
                background: var(--color-selecting);
            }
        }
    }

    .ui-menu,
    .switcher-list li.active,
    .switcher-list li:nth-child(odd):hover,
    .ui-tabs-nav .ui-tabs-active,
    .ui-tabs-vertical .ui-tabs-nav .ui-tabs-active {
        background: #ffffff;
    }

    @include setup.dark-mode {
        .switcher-list li.active,
        .ui-tabs-vertical .ui-tabs-nav .ui-tabs-active {
            background: var(--color-highlight-box);
        }
    }

    .txp-upload-progress::-webkit-progress-value {
        background-color: var(--color-button-primary-gradient-to);
    }

    .txp-upload-progress::-moz-progress-bar {
        background-color: var(--color-button-primary-gradient-to);
    }

    .txp-upload-progress::-ms-fill {
        background-color: var(--color-button-primary-gradient-to);
    }

    .ui-progressbar-value {
        background-color: var(--color-button-primary-gradient-to);
    }

    .ui-tabs-vertical {
        .ui-tabs-nav {
            border-bottom-color: var(--color-border);
        }

        .ui-tabs-nav li {
            border-color: var(--color-border);
            border-bottom-color: transparent;
        }
    }
}



/* ==========================================================================
   Additional layout for devices < 547px
   ========================================================================== */


@media (max-width: setup.$break-small) {

    /**
     * Collapse jQuery UI tabs responsively.
     */

    .ui-tabs:not(.ui-tabs-vertical) .ui-tabs-nav {
        border-bottom-color: var(--color-border);

        li {
            border-color: var(--color-border);
            border-bottom-color: transparent;
        }
    }

    @include setup.dark-mode {
        .ui-tabs-nav .ui-tabs-active {
            background: var(--color-highlight-box);
        }
    }
}
